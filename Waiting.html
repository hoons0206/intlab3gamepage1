<!DOCTYPE html>
<html>
<head>
  <title>About</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <link rel="stylesheet" href="style2.css">
  <meta charset="UTF-8">
  <title>Waiting</title>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-database-compat.js"></script>
  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyD4d7JvLj90ar0Q8o_AEXFTjhMZF-oI-DU",
      authDomain: "interaction-lab-3-c4513.firebaseapp.com",
      databaseURL: "https://interaction-lab-3-c4513-default-rtdb.firebaseio.com",
      projectId: "interaction-lab-3-c4513",
      storageBucket: "interaction-lab-3-c4513.appspot.com",
      messagingSenderId: "40397314576",
      appId: "1:40397314576:web:b6bbbeb99fd43bda508895"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    // 성공 신호 기다리기
    db.ref('game/result').on('value', (snapshot) => {
      const result = snapshot.val();
      if (result && result.status === 'success') {
        window.location.href = 'success.html';
      }
    });
</head>
  
<body>

  <div class="intro">
    <p id="typed-text"></p>
  </div>


  <div class="crt-bloom"></div>
  <div class="crt-frame"></div>

  <script>
    const text = `다른 노동자의 작업이\n성공하기를 기다리고 있어요!`;

    const typedEl = document.getElementById("typed-text");
    let idx = 0;

    function typeNext() {
      if (idx <= text.length) {
        typedEl.innerHTML = text.slice(0, idx).replace(/\n/g, '<br>');
        idx++;
        setTimeout(typeNext, 60);
      } else {
        const button = document.querySelector('.start-button');
        button.style.display = 'inline-block';
        button.style.opacity = '0';
        button.animate([
          { opacity: 0 },
          { opacity: 1 }
        ], {
          duration: 1000,
          fill: 'forwards'
        });
      }
    }

    setTimeout(typeNext, 1000);
  </script>

</body>
</html>
